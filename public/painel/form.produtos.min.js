function postProductStore(pills_active,finaliza){var form_data=new FormData($(`#form-${pills_active}`)[0]);form_data.append("postProduct","true"),$("#product_id").length>0&&form_data.append("id",$("#product_id").val()),$.ajax({url:"",type:"POST",data:form_data,cache:!1,contentType:!1,processData:!1,success:data=>{if(console.log(data),0==$("#product_id").length?$(".content-wrapper").prepend(`<input type="hidden" id="product_id" value="${data.product_id}">`):0==(parseInt($("#product_id").val())||0)&&$("#product_id").val(data.product_id),data.seo&&(data.seo.title&&$("#form-seo").find('input[name="title"]').val(data.seo.title),data.seo.link&&$("#form-seo").find('input[name="link"]').val(data.seo.link),data.seo.banner_path&&$("#form-seo").find(".banner_path").html(`<img width="280px" src="${data.seo.banner_path}">`)),data.redirect_url&&finaliza){for(var next_element=$(`#pills-${pills_active}-tab`).parent().next().children();next_element.is(".d-none");)next_element=next_element.parent().next().children();0==next_element.parent().next().children().length&&Swal.fire({icon:"success",title:"seo"==pills_active?"Produto cadastrado com sucesso!":"Seu produto foi cadastrado com sucesso e está em analise!"}).then(result=>{result.isConfirmed&&(window.location.href=data.redirect_url)})}}})}function currentStep(pills_active){var full_url=get_full_url,new_url_get="?",url_get=(full_url=full_url.search("[?]")>0?full_url.replaceAll("&amp;","&").split("?"):[full_url.replaceAll("&amp;","&"),""])[1]?full_url[1].split("&"):[],count_order=0;for(i in url_get)url_get[i].search("step")<0&&(new_url_get+=(count_order>0?"&":"")+url_get[i],count_order++);var url_insert=full_url[0]+new_url_get+`${count_order>=1?"&":""}step=${pills_active||""}`;window.history.pushState({url:url_insert},$("title").text(),url_insert)}function checkProdutoVariavel(thiss){if("check_produto_variavel"===thiss.attr("id"))if(thiss.prop("checked")){$("#pills-variacoes-tab").removeClass("d-none"),$(".preco-dimensao-geral, .desconto-progressivo").addClass("d-none"),$(".preco-dimensao-geral, .desconto-progressivo").find("input").val("");var seller_id=$("select.seller_id").val()||$(".seller_id").val();$(".check-select.attribute-select .check-select-list").empty();var attrs_selected=$(".check-select.attribute-select").attr("data-attrs_selected")||[];attrs_selected=JSON.parse(attrs_selected),$.ajax({url:"/geral/busca-attrs",type:"POST",data:{seller_id:seller_id},success:data=>{$.each(data,(key,value)=>{$(".check-select.attribute-select .check-select-list").append(`\n                            <div class="check-select-div-input col-12 col-sm-3" title="${value.name}" data-toggle="tooltip">\n                                <input type="checkbox" id="attribute-${value.id}" name="attrs[]"  ${$.inArray(value.id,attrs_selected)>-1?"checked":""} value="${value.id}">\n                                <label class="text-truncate" for="attribute-${value.id}">${value.name}</label>\n                            </div>\n                        `)}),$('[data-toggle="tooltip"]').tooltip()}})}else $("[name='check_desconto']").prop("checked")?$(".desconto-progressivo").removeClass("d-none"):$(".preco-dimensao-geral").removeClass("d-none"),$("#pills-variacoes-tab").addClass("d-none"),$(".check-select.attribute-select .check-select-list").empty(),$(".variacoes").empty(),$('[name="perecivel"]').prop("checked")||$(".perecivel").removeClass("d-none")}function checkPlanoAssinatura(thiss){"check_plano_assinatura"===thiss.attr("id")&&(thiss.prop("checked")?($("#pills-assinatura-tab").removeClass("d-none"),$(".preco-dimensao-geral, #pills-variacoes-tab").addClass("d-none"),$("#check_stock_controller").parent().parent().addClass("d-none")):($("#pills-assinatura-tab").addClass("d-none"),$("#check_produto_variavel").prop("checked")||$(".preco-dimensao-geral").removeClass("d-none"),$("#check_stock_controller").parent().parent().removeClass("d-none")))}$(document).ready((function(){$(".check-select").each((function(){var title=$(this).data("title"),btn_save=$(this).data("btn_save"),html=$(this).html();$(this).html(`\n            <div class="check-select-button">\n                <div class="pt-1 title-selects">${title}</div>\n                <span class="arrow-down"></span>\n            </div>\n            <div class="check-select-modal d-none">\n                <div class="check-select-header">\n                    <div class="check-select-btns">\n                        <button type="button" class="btn bg-white btn-sm check-select-btn-mark-off border">Desmarcar Todos</button>\n                        <button type="button" class="btn btn-sm btn-info check-select-btn-save">${btn_save}</button>\n                    </div>\n                </div>\n                <div class="check-select-list">\n                    ${html}\n                </div>\n            </div>\n        `),$(this).css("display","block"),$('[data-toggle="tooltip"]').tooltip()})),$(document).on("click",".check-select-button",(function(){$(this).closest(".check-select").find(".check-select-modal").is(".d-none")&&$(".check-select-modal").addClass("d-none"),$(this).closest(".check-select").find(".check-select-modal").toggleClass("d-none"),$("body").toggleClass("check-select-show")})),$(document).on("click",".check-select-show",(function(e){0==$(e.target).closest(".check-select").length&&($(".check-select-modal").addClass("d-none"),$("body").toggleClass("check-select-show"),$(".check-select").each((function(){var selects=[];$(this).find('.check-select-list input[type="checkbox"]').each((function(){$(this).prop("checked")&&selects.push($(this).parent().attr("title"))})),selects.length>0?selects.length>3?$(this).find(".title-selects").text(selects.length+" Selecionados"):$(this).find(".title-selects").text(selects.join(", ")):$(this).find(".title-selects").text($(this).data("title"))})))})),$(document).on("click",".check-select-btn-save",(function(){$(this).closest(".check-select-modal").addClass("d-none"),$("body").toggleClass("check-select-show");var selects=[];$(this).closest(".check-select-modal").find('.check-select-list input[type="checkbox"]').each((function(){$(this).prop("checked")&&selects.push($(this).parent().attr("title"))})),selects.length>0?selects.length>3?$(this).closest(".check-select").find(".title-selects").text(selects.length+" Selecionados"):$(this).closest(".check-select").find(".title-selects").text(selects.join(", ")):$(this).closest(".check-select").find(".title-selects").text($(this).closest(".check-select").data("title"))})),$(document).on("click",".check-select-btn-mark-off",(function(){$(this).closest(".check-select-modal").find('input[type="checkbox"]').prop("checked",!1)})),$(".check-select").each((function(){setTimeout(()=>{var selects=[];$(this).find('.check-select-list input[type="checkbox"]').each((function(){$(this).prop("checked")&&selects.push($(this).parent().attr("title"))})),console.log(selects),selects.length>0?selects.length>3?$(this).find(".title-selects").text(selects.length+" Selecionados"):$(this).find(".title-selects").text(selects.join(", ")):$(this).find(".title-selects").text($(this).data("title"))},1e3)})),$(document).on("change",".check-custom",(function(e){var thiss=$(this);$(".check-custom").each((function(){thiss.parent().index()!==$(this).parent().index()&&($(this).prop("checked",!1),$(this).parent().find("label").removeClass("active"),$(this).parent().css("pointer-events","auto")),checkProdutoVariavel($(this)),checkPlanoAssinatura($(this))})),$(this).prop("checked")&&($(this).parent().find("label").addClass("active"),$(this).parent().css("pointer-events","none"))})),$(".check-custom").each((function(){$(this).prop("checked")&&($(this).parent().css("pointer-events","none"),checkProdutoVariavel($(this)),checkPlanoAssinatura($(this)))})),$(document).on("change",'[name="check_desconto"]',(function(){$(this).prop("checked")?!0!==$("[name='produto_variavel']").prop("checked")?$(".desconto-progressivo").removeClass("d-none"):$(".desconto-card").removeClass("d-none"):(!0!==$("[name='produto_variavel']").prop("checked")&&$(".price-variation").removeClass("d-none"),$(".desconto-progressivo").addClass("d-none"),$(".div-row-desconto").empty(),$(".desconto-card").addClass("d-none"),$(".div-row-desconto-var").empty())})),$(document).on("click",".div-image",(function(){$(".div-image").removeClass("active"),$(this).addClass("active"),$(this).find('input[type="radio"]').prop("checked",!0)})),$(".div-image-registers").sortable({placeholder:"ui-state-highlight",cursor:"move",beforeStop:function(event,ui){var positions=[];$(".div-image-registers > div").each((function(index){$(this).attr("data-id")&&positions.push({foto_id:$(this).attr("data-id"),position:index+1})})),$.ajax({url:url_geral_save,type:"POST",data:{positions:positions,postProduct:"true",postType:"postUpdatePositionFotos"},success:data=>{}})}}).disableSelection(),$(document).on("click",".btn-upload-fotos",()=>$(".upload-fotos").trigger("click")).on("change",".upload-fotos",(function(){Swal.fire({title:"Carregando imagens, aguarde...",allowOutsideClick:!1,timerProgressBar:!0,didOpen:()=>{Swal.showLoading()}});var files=$(this).prop("files"),form_images=new FormData;for(i in files)files[i].name&&form_images.append("images[]",files[i]);form_images.append("postProduct","true"),form_images.append("postType","postAddFotos"),form_images.append("product_id",$("#product_id").val()),$.ajax({url:url_geral_save,type:"POST",data:form_images,cache:!1,contentType:!1,processData:!1,success:data=>{$(".div-image-registers").append(data),$(this).val(""),Swal.close()},error:err=>{$(this).val(""),Swal.fire({icon:"error",title:"Houve um erro na gravação, contate o administrador!"})}})})),$(document).on("click",".btn-delete-foto",(function(){Swal.fire({icon:"warning",title:"Deseja apagar essa foto?",showCancelButton:!0,confirmButtonText:"Sim Apagar",cancelButtonText:"Cancelar",focusConfirm:!1}).then(result=>{result.isConfirmed&&$.ajax({url:$(this).data("url"),type:"POST",data:{postRemoveFotos:"true",foto_id:$(this).data("id")},success:data=>{$(this).parent().remove()}})})})),$(document).on("click",'[name="perecivel"]',(function(e){$(this).prop("checked")?($(".perecivel").addClass("d-none"),$(".perecivel-attr").addClass("d-none")):(!0!==$('[name="check_variation"]').prop("checked")&&($(".perecivel").removeClass("d-none"),$(".perecivel").find("input").val("")),$(".perecivel-attr").removeClass("d-none"))})),$(document).on("change","select.seller_id",(function(){var seller_id=$("select.seller_id").val();$(".check-select.attribute-select .check-select-list").empty(),$.ajax({url:"/geral/busca-attrs",type:"POST",data:{seller_id:seller_id},success:data=>{$.each(data,(key,value)=>{$(".check-select.attribute-select .check-select-list").append(`\n                        <div class="check-select-div-input col-12 col-sm-3" title="${value.name}" data-toggle="tooltip">\n                            <input type="checkbox" id="attribute-${value.id}" name="attrs[]" value="${value.id}">\n                            <label class="text-truncate" for="attribute-${value.id}">${value.name}</label>\n                        </div>\n                    `)}),$('[data-toggle="tooltip"]').tooltip()}})})),$(document).on("click",".btn-plus-variation",(function(e){var attrs_id=[];$(".check-select.attribute-select .check-select-list").find('input[type="checkbox"]:checked').each((function(){attrs_id.push($(this).val())})),$.ajax({url:"/produto/variations/index",type:"POST",data:{seller_id:$(".seller_id").val(),transporte_proprio:$('[name="perecivel"]').prop("checked")?"true":"false",stock_controller:$('[name="stock_controller"]').prop("checked")?"true":"false",attrs_id:attrs_id,check_discount:$('[name="check_desconto"]').prop("checked")?"true":"false"},success:data=>{$(".variacoes").prepend(data)}})})),$(document).on("change",'.check-select.attribute-select .check-select-list input[type="checkbox"]',(function(e){var option_attr_id=$(this).val();$(".select-variation-"+option_attr_id).remove(),$(this).prop("checked")&&$(".variacoes").find(".card").each((function(){var varranid=$(this).data("varranid");if(0==$(this).find(".select-variation-"+option_attr_id).length){var thus_ul=$(this).find(".card-div-var");$.ajax({url:"/geral/busca-attrs-var",type:"POST",data:{seller_id:$('[name="seller_id"]').val(),attr_id:option_attr_id},success:data=>{thus_ul.append(`\n                                <div class="row mb-2 select-variation-${data.id}">\n                                    <div class="col-12">\n                                        <label style="font-size: .8rem;" for="id_${varranid}attributos${data.id}">${data.name}:</label>\n                                    </div>\n                                    <div class="col-5 pr-0">\n                                        <select class="form-control form-control-sm attr-variation-${data.id}" id="id_${varranid}attributos${data.id}" data-attr_id="${data.id}" name="variations[${varranid}][attributos][]">\n                                            <option value="0-${data.id}">Qualquer um</option>\n                                            ${data.variations.map((function(query){return`<option value="${query.id}-${data.id}">${query.name}</option>`})).join("")}\n                                        </select>\n                                    </div>\n                                    <div class="col-7 pl-1 d-flex align-items-end">\n                                        <div class="pr-1"><b>OU</b></div>\n                                        <div>\n                                            <button class="btn btn-sm btn-outline-success btn-new-attribute-value" style="font-size: .7rem;" type="button">CRIAR VARIAÇÃO</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            `)}})}}))})),$(document).on("click",".btn-new-attribute",(function(){var seller_id=$("select.seller_id").val()||$(".seller_id").val();Swal.fire({title:"Criar Novo Atributo",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Criar",cancelButtonText:"Cancelar"}).then(result=>{result.isConfirmed&&(Swal.fire({title:"Criando Atributo",allowOutsideClick:!1,timerProgressBar:!0,didOpen:()=>{Swal.showLoading()}}),$.ajax({url:"/produto-attr/new",type:"POST",data:{seller_id:seller_id,attr_name:result.value},success:data=>{$(".check-select.attribute-select .check-select-list").append(`\n                            <div class="check-select-div-input col-12 col-sm-3" title="${data.name}" data-toggle="tooltip">\n                                <input type="checkbox" id="attribute-${data.id}" name="attrs[]" value="${data.id}">\n                                <label class="text-truncate" for="attribute-${data.id}">${data.name}</label>\n                            </div>\n                        `),$(".check-select.attribute-select").find(`#attribute-${data.id}`).trigger("click");var selects=[];$(".check-select.attribute-select").find('.check-select-list input[type="checkbox"]').each((function(){$(this).prop("checked")&&selects.push($(this).parent().attr("title"))})),console.log(selects),selects.length>0?selects.length>3?$(".check-select.attribute-select").find(".title-selects").text(selects.length+" Selecionados"):$(".check-select.attribute-select").find(".title-selects").text(selects.join(", ")):$(".check-select.attribute-select").find(".title-selects").text($(".check-select.attribute-select").data("title")),Swal.fire({icon:"success",title:"Atributo Criado"})},error:err=>{Swal.fire({icon:"error",title:"Erro na criação do Atributo!"})}}))})})),$(document).on("click",".btn-new-attribute-value",(function(){var btn=$(this),attr_id=$(this).closest(".row").find("select").data("attr_id"),seller_id=$("select.seller_id").val()||$(".seller_id").val();Swal.fire({title:"Nova Variação do Atributo",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Criar",cancelButtonText:"Cancelar"}).then(result=>{result.isConfirmed&&(Swal.fire({title:"Criando Variação",allowOutsideClick:!1,timerProgressBar:!0,didOpen:()=>{Swal.showLoading()}}),$.ajax({url:"/produto-attr/new",type:"POST",data:{seller_id:seller_id,attr_id:attr_id,value_name:result.value},success:data=>{$("select.attr-variation-"+attr_id).append('<option value="'+data.id+"-"+attr_id+'">'+data.name+"</option>"),btn.parent().parent().find("select").val(data.id+"-"+attr_id),Swal.fire({icon:"success",title:"Variação Criado"})}}))})})),$(document).on("click",".btn-add-campo-plano",(function(){for(var qty_planos=$(".div-row-planos").find(".row").length,i=0;i<=qty_planos;i++)0==$(".div-row-planos").find(".plan-"+i).length&&$(".div-row-planos").append(`\n                    <div class="col-12 col-sm-3 plan-${i}">\n                        <div class="card">\n                            <div class="card-body">\n                                <div class="row justify-content-center">\n                                    <div class="form-group col-12">\n                                        <label for="">Título do Plano</label>\n                                        <input type="text" class="form-control form-control-sm" name="plan[${i}][plan_title]">\n                                    </div>\n                                    <div class="col-12"><label for="">Realizar Cobrança a cada</label></div>\n                                    <div class="form-group col-12">\n                                        <select class="form-control form-control-sm" name="plan[${i}][select_interval]">\n                                            <option value="4-week">4 Semanas</option>\n                                            <option value="1-month">1 Mês</option>\n                                            <option value="3-month">3 Meses</option>\n                                        </select>\n                                    </div>\n                                    <div class="form-group col-12">\n                                        <label for="">Duração do Plano (Mês)</label>\n                                        <input type="text" class="form-control form-control-sm" name="plan[${i}][duration_plan]">\n                                    </div>\n                                    <div class="form-group col-12">\n                                        <label for="">Valor da Assinatura</label>\n                                        <input type="text" class="form-control form-control-sm real" name="plan[${i}][plan_value]">\n                                    </div>\n                                    <div class="form-group col-12">\n                                        <label for="">Quantidade de Entregas</label>\n                                        <select class="form-control form-control-sm" name="plan[${i}][select_entrega]">\n                                            <option value="semanal">Semanal</option>\n                                            <option value="quinzenal">Quinzenal</option>\n                                            <option value="mensal">Mensal</option>\n                                            <option value="trimestral">Trimestral</option>\n                                        </select>\n                                    </div>\n                                    <div class="form-group col-12 perecivel ${$('[name="perecivel"]').prop("checked")?"d-none":""}">\n                                        <label for="">Peso KG</label>\n                                        <input type="text" class="form-control form-control-sm" name="plan[${i}][peso]">\n                                    </div>\n                                    <div class="form-group col-12 perecivel ${$('[name="perecivel"]').prop("checked")?"d-none":""}">\n                                        <label for="">Altura CM</label>\n                                        <input type="text" class="form-control form-control-sm cm" name="plan[${i}][dimensoes_A]">\n                                    </div>\n                                    <div class="form-group col-12 perecivel ${$('[name="perecivel"]').prop("checked")?"d-none":""}">\n                                        <label for="">Comprimento CM</label>\n                                        <input type="text" class="form-control form-control-sm cm" name="plan[${i}][dimensoes_C]">\n                                    </div>\n                                    <div class="form-group col-12 perecivel ${$('[name="perecivel"]').prop("checked")?"d-none":""}">\n                                        <label for="">Largura CM</label>\n                                        <input type="text" class="form-control form-control-sm cm" name="plan[${i}][dimensoes_L]">\n                                    </div>\n                                    <div class="form-group col-12 perecivel">\n                                        <label for="">Descrição</label>\n                                        <textarea class="form-control form-control-sm" name="plan[${i}][descption_plan]"></textarea>\n                                    </div>\n\n                                    <div class="col-6 mt-3">\n                                        <button type="button" class="btn btn-block btn-sm btn-danger btn-remove-campo-plano"><i class="fas fa-times"></i> remover</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                `);$(".real").mask("000.000,00",{reverse:!0}),$(".kg").mask("000,000",{reverse:!0}),$(".cm").mask("000",{reverse:!0})})),$(document).on("click",".btn-remove-campo-plano",(function(){$(this).closest(".card").parent().remove()})),$(document).on("click",".btn-add-campo-desconto",(function(){for(var thiss=$(this).closest(".card"),qty_desconto=thiss.find(".div-row-desconto").find(".row").length,i=0;i<=qty_desconto;i++)0==thiss.find(".div-row-desconto").find(".discount-"+i).length&&thiss.find(".div-row-desconto").append(`\n                    <div class="col-12 discount-${i}">\n                        <div class="row mb-3" style="font-size: .8rem;">\n                            <div class="col-9 d-flex justify-content-center">\n                                <label class="ml-2 mt-1" for="">Acima de</label>\n                                <input type="number" class="form-control form-control-sm mx-2" name="discount[${i}][discount_quantity]" style="width:15%; height: 23px; font-size: .8rem;">\n                                <label class="mt-1" for=""> unidades </label>\n                                <label class="mt-1 ml-2" for=""> o preço é </label>\n                                <input type="text" class="form-control form-control-sm real mx-2" placeholder="R$" name="discount[${i}][discount_value]" style="width:20%; height: 23px; font-size: .8rem;">\n                            </div>\n                            <div class="col-3 text-center"><button type="button" class="btn btn-danger btn-remove-campo-desconto" style="padding: 2px 4px; font-size: .8rem;"><i class="fas fa-times"></i> remover</button></div>\n                        </div>\n                    </div>\n                `);$(".real").mask("000.000,00",{reverse:!0})})),$(document).on("click",".btn-remove-campo-desconto",(function(){$(this).closest(".row").parent().remove()})),$(document).on("click",".btn-add-desconto-card-variacao",(function(){for(var desconto_card_var=$(this).closest(".card"),qty_desconto=desconto_card_var.find(".div-row-desconto-var").find(".row").length,data_rand=$(this).data("rand"),i=0;i<=qty_desconto;i++)0==desconto_card_var.find(".div-row-desconto-var").find(".discount-var-"+i).length&&desconto_card_var.find(".div-row-desconto-var").append(`\n                    <div class="col-12 discount-var-${i}">\n                        <div class="card">\n                            <div class="card-body p-2">\n                                <div class="row justify-content-center" style="font-size: .8rem;">\n                                    <div class="col-12 d-flex justify-content-center">\n                                        <label for="">Acima de</label>\n                                        <input type="number" class="form-control form-control-sm mx-2" name="${data_rand}[discount][${i}][discount_quantity]" style="font-size: .8rem; width: 20%; height: 23px;">\n                                        <label for=""> unidades </label>\n                                    </div>\n                                    <div class="d-flex justify-content-center col-12">\n                                        <label for=""> o preço é </label>\n                                        <input type="text" class="form-control form-control-sm mx-2 real" name="${data_rand}[discount][${i}][discount_value]" placeholder="R$" style="font-size: .8rem; width: 30%; height: 23px;">\n                                    </div>\n\n                                    <div class="col-12 text-center mt-1">\n                                        <button type="button" class="btn btn-sm btn-primary btn-remove-desconto-card" style="font-size: .8rem; padding: 0 8px;"><i class="fas fa-times"></i> remover</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                `);$(".real").mask("000.000,00",{reverse:!0})})),$(document).on("click",".btn-remove-desconto-card",(function(){$(this).closest(".card").parent().remove()}));var next_element_valid=!0;$(document).on("click",".btn-continuar-save",(function(){postProductStore($(".pills-active").val(),!0);for(var tab_select,next_element=$(`#pills-${$(".pills-active").val()}-tab`).parent().next().children();next_element.is(".d-none");)next_element=next_element.parent().next().children();if(next_element_valid){var pills_active=next_element.attr("id").split("-")[1];$(".pills-active").val(pills_active),next_element.removeClass("inactive").trigger("click"),"inicio"!==pills_active&&$(".btn-voltar").removeClass("d-none")}0==next_element.parent().next().children().length&&(next_element_valid=!1,$(this).html(texto_btn)),currentStep(pills_active)})),$(document).on("click",".btn-voltar",(function(){next_element_valid=!0;for(var tab_select,prev_element=$(`#pills-${$(".pills-active").val()}-tab`).parent().prev().children();prev_element.is(".d-none");)prev_element=prev_element.parent().prev().children();if(next_element_valid){var pills_active=prev_element.attr("id").split("-")[1];$(".pills-active").val(pills_active),prev_element.removeClass("inactive").trigger("click"),"inicio"==pills_active&&$(".btn-voltar").addClass("d-none")}$(".btn-continuar-save").html("SALVAR E CONTINUAR"),currentStep(pills_active)})),$(document).on("click",'#pills-tab [data-toggle="pill"]',(function(e){if(e.originalEvent){postProductStore($(".pills-active").val(),!1),next_element_valid=!0;var pills_active=$(this).attr("id").split("-")[1];$(".pills-active").val(pills_active),"inicio"==pills_active?$(".btn-voltar").addClass("d-none"):$(".btn-voltar").removeClass("d-none"),$(".btn-continuar-save").html("SALVAR E CONTINUAR"),currentStep(pills_active),0==$(this).parent().next().children().length&&(next_element_valid=!1,$(".btn-continuar-save").html(texto_btn))}})),$(document).on("click",".btn-aprovar-analise",(function(){Swal.fire({icon:"warning",title:"Liberar produto?",showCancelButton:!0,confirmButtonText:"Sim, Liberar",cancelButtonText:"Cancelar"}).then(result=>{if(result.isConfirmed){Swal.fire({title:"Liberando produto...",allowOutsideClick:!1,timerProgressBar:!0,didOpen:()=>{Swal.showLoading()}});var form_data=new FormData;form_data.append("postProduct","true"),form_data.append("postType","postLiberarProduto"),form_data.append("id",$("#product_id").val()),$.ajax({url:"",type:"POST",data:form_data,cache:!1,contentType:!1,processData:!1,success:data=>{data.redirect_url&&Swal.fire({icon:"success",title:data.msg}).then(result=>{result.isConfirmed&&(data.redirect_url&&(window.location.href=data.redirect_url),Swal.close())})}})}})})),$(document).on("click",".btn-salvar-campos-rejeicao",(function(){Swal.fire({title:"Salvando, aguarde...",allowOutsideClick:!1,timerProgressBar:!0,didOpen:()=>{Swal.showLoading()}});var form_data=new FormData($(this).closest("form")[0]);form_data.append("postProduct","true"),form_data.append("postType","postNegarProduto"),form_data.append("id",$("#product_id").val()),$.ajax({url:"",type:"POST",data:form_data,cache:!1,contentType:!1,processData:!1,success:data=>{data.redirect_url&&($(this).closest(".modal").modal("hide"),Swal.fire({icon:"success",title:"Dados salvos, ",showCancelButton:!0,confirmButtonText:"Ir para listagem",cancelButtonText:"Ficar na pagina"}).then(result=>{result.isConfirmed&&(window.location.href=data.redirect_url)}))}})})),$((function(){var inactive=!0;$('#pills-tab [data-toggle="pill"]').each((function(){inactive&&($(this).removeClass("inactive"),$(this).is(`#pills-${$(".pills-active").val()}-tab`)&&(inactive=!1,$(this).trigger("click")),"inicio"!==$(".pills-active").val()&&$(".btn-voltar").removeClass("d-none"))})),$(".event-time-click").each((function(){$(this).trigger("click"),$(this).trigger("change")}))}))}));